# 激光雷达运动畸变去除

## 一、概念介绍

### 1、激光雷达传感器介绍

![](\img\10.png)

#### i.三角测距原理(简单激光雷达测距)

![](\img\11.png)

#### ii.TOF测距

![](\img\12.png)

#### iii.二者特点对比

**三角测距特点：**

​	优点：中近距离精度较高；价格便宜

​	缺点：远距离精度较差；易受干扰

​	使用场景：一般在室内使用

**飞行时间(TOF)测距特点**

​	优点：测距范围广；测距精度高；抗干扰能力强

​	不足：价格昂贵

​	使用场景：室内室外皆可

### 2、运动畸变介绍

**产生的原因：**

​	·激光点数据不是瞬时获得，是激光雷达转一圈后一起得到的(例如10Hz)，但是这100ms内机器人在运动，因此这个过程中会出现畸变。

​	·激光测量时伴随着机器人的运动，如下图所示：

![](\img\13.png)

假设获得点从左到右，测量过程中我们认为没有运动，但是实际上机器人运动了，因此出现这种情况。

​	·激光帧率较低时，机器人的运动不能忽略

## 二、畸变去除

### 1、纯估计方法(ICP方法介绍)

#### i.概述

**目的：ICP方法是用来求解两个点云集合转换关系的最通用的方法**

数学描述：
$$
给定两个点云集合：\\
X=\{x_1,x_2,...,x_{N_x}\}\\
P=\{p_1,p_2,...,p_{N_p}\}
$$
其中，xi和pi表示点云的坐标，Nx和Np表示点云的数量

求解旋转矩阵R和平移向量t，使得下式(误差)最小：
$$
e(R,t)=\frac{1}{N_p}\sum^{N_p}_{i=1}||x_i-Rp_i-t||^2
$$
求解过程如下：

![]()

#### ii.未知对应点的求解方法

​	相对于已知对应点：未知对应点中不知道匹配关系，不能一步到位计算出R和t，我们需要进行迭代计算来缩小误差。

​	流程：先用一种假定的方法来寻找对应点(最近)，根据对应点关系计算R和t，对点云进行转换，计算误差，不断进行迭代。

![]()

#### iii. ICP方法的优缺点

​	没有考虑激光的运动畸变

#### iv. VICP方法

​	**特点：考虑了机器人的运动(假设匀速运动)，匹配的同时可以估计机器人的速度。**

​	

### 2、里程计辅助方法

#### i.概述

**已知数据：**

1. 当前帧激光起始时间ts，te
2. 两个激光束之间的时间间隔Δt
3. 里程计数据按照时间顺序存储在一个队列中，队首的时间最早
4. 最早的里程计数据的时间戳<ts
5. 最晚的历程及数据的时间戳>te

**目标：**

1. 求解当前帧激光数据中每一个激光点对应的机器人位姿，即求解{ts,...,te}时刻的机器人位姿
2. 根据求解的位姿把所有激光点转换到统一坐标系下
3. 重新封装成一帧激光数据，发布出去

#### ii. 方法





### 3、融合方法